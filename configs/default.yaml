# Urban Structure Analysis System - 統合設定ファイル
# ============================================================

# ===== Phase 1: Acquisition & Space =====
canvas:
  half_size_m: 1000        # 中心から±1000m = 2km四方
  resolution_m: 1.0        # 1px = 1m

road_width_fallback:
  motorway: 20
  trunk: 15
  primary: 12
  secondary: 10
  tertiary: 8
  residential: 6
  service: 4
  default: 5

# ===== Phase 3: Analysis Engine =====
analysis:
  # 共通スケールレンジ（全指標で統一）
  r_min: 2
  r_max: 512
  r_steps: 20              # log2スケールで生成

  mfa:
    q_min: -10
    q_max: 10
    q_steps: 41
    grid_shift_count: 16   # グリッドシフト平均化

  lacunarity:
    method: "integral_image"  # or "gliding_box"
    full_scan: true           # 全画素探索

  percolation:
    d_min: 1
    d_max: 100
    d_steps: 50

# ===== Execution =====
execution:
  n_jobs: -1               # joblib並列数 (-1 = 全コア)
  cache_integral: true     # 積分画像をキャッシュ
  verbose: true

# ===== Clustering =====
clustering:
  # 前処理設定
  preprocessing:
    normalization_method: "robust"  # "minmax", "standard", "robust"
    dimensionality_reduction: "pca"  # "pca", "umap", "tsne", null
    n_components: null              # null = 自動選択 (PCA: 95%分散, その他: 2)
    random_state: 42
  
  # クラスタリング設定
  method: "kmeans"         # "kmeans", "dbscan", "hierarchical"
  n_clusters: null         # null = 自動選択 (sqrt(n_samples / 2))
  eps: 0.5                 # DBSCAN用
  min_samples: 3          # DBSCAN用
  linkage: "ward"         # Hierarchical用 ("ward", "complete", "average")

